<!-- Nút bấm AI Assistant -->
<style>
  .ai-chat-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #007bff;
    color: white;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    font-size: 24px;
    z-index: 999;

    /* Căn giữa icon */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
  }
  .ai-chat-iframe-container {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 350px;
    height: 75vh;
    border: none;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    display: none; /* Ẩn ban đầu */
    z-index: 1000;
  }
</style>

<!-- Thư viện tạo biểu tượng -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=chat" />

<!-- Nút bấm AI Assistant -->
<button class='ai-chat-button' onclick='toggleAIChat()'>
<span class="material-symbols-outlined">chat</span>
</button>

<!-- Iframe sẽ được tạo bằng JavaScript -->
<div id='ai-chat-container'></div>

<script>
  //<![CDATA[
  let aiIframe;

  window.addEventListener('load', function () {
    setTimeout(() => {
      const container = document.getElementById('ai-chat-container');
      // Tạo iframe và thêm vào trang
      aiIframe = document.createElement('iframe');
      aiIframe.className = 'ai-chat-iframe-container';
      // Thêm URL của chatbot vào iframe
      aiIframe.src = 'https://your-chatbot-url.onrender.com/chat?url=' + window.location.href;
      aiIframe.referrerPolicy = 'strict-origin';
      aiIframe.style.display = 'none';
      container.appendChild(aiIframe);
    }, 2000);
  });

  function toggleAIChat() {
    if (aiIframe) {
      // Nếu iframe đã tồn tại, chỉ cần hiển thị hoặc ẩn nó
      aiIframe.style.display = (aiIframe.style.display === 'none' ? 'block' : 'none');
    } else {
      // Nếu iframe chưa được tạo, tạo mới và thêm vào trang
      const container = document.getElementById('ai-chat-container');
      aiIframe = document.createElement('iframe');
      aiIframe.className = 'ai-chat-iframe-container';
      // Thêm URL của chatbot vào iframe
      aiIframe.src = 'https://your-chatbot-url.onrender.com/chat?url=' + window.location.href;
      aiIframe.referrerPolicy = 'strict-origin';
      aiIframe.style.display = 'block';
      container.appendChild(aiIframe);
    }
  }
  //]]>
</script>
